promotionPaths:
- sourcePath: workspace/
  promotionPrs:
  - targetPaths:
    - devops/.*/dev_us-east-1/
- sourcePath: devops/.*/stage_us-east-1/ # This will start a promotion to prod from any "stage" path
  conditions:
    prHasLabels:
    - quick_promotion # This flow will run only if PR has "quick_promotion" label, see targetPaths below
  promotionPrs:
  - targetPaths:
    - devops/.*/prod_ap-southeast-2/ # First PR for only a single cluster
  - targetPaths:
    - devops/.*/prod_us-east-1/ # 2nd PR will sync all remaining clusters
    - devops/.*/prod_eu-central-1/
- sourcePath: devops/.*/stage_us-east-1 # This flow will run on PR without "quick_promotion" label
  promotionPrs:
  - targetPaths:
    - devops/.*/prod_ap-southeast-2/ # Each cluster will have its own promotion PR
  - targetPaths:
    - devops/.*/prod_us-east-1/
  - targetPaths:
    - devops/.*/prod_eu-central-1/
dryRunMode: false
autoApprovePromotionPrs: false
toggleCommitStatus:
  override-terrafrom-pipeline: github-action-terraform
